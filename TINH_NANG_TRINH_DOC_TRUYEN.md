# ğŸ“š TÃNH NÄ‚NG TRÃŒNH Äá»ŒC TRUYá»†N FLUTTER_BTL

## ğŸ¯ Tá»”NG QUAN
á»¨ng dá»¥ng Ä‘á»c truyá»‡n Flutter_BTL lÃ  má»™t trÃ¬nh Ä‘á»c sÃ¡ch Ä‘iá»‡n tá»­ Ä‘a tÃ­nh nÄƒng, há»— trá»£ cáº£ truyá»‡n tranh vÃ  truyá»‡n chá»¯ vá»›i nhiá»u tÃ­nh nÄƒng nÃ¢ng cao Ä‘á»ƒ tá»‘i Æ°u tráº£i nghiá»‡m Ä‘á»c.

---

## ğŸ”¥ DANH SÃCH TÃNH NÄ‚NG CHI TIáº¾T

### ğŸ“– 1. HIá»‚N THá»Š Ná»˜I DUNG TRUYá»†N
- **Äá»c Ä‘a Ä‘á»‹nh dáº¡ng**: Há»— trá»£ cáº£ truyá»‡n tranh (comic) vÃ  truyá»‡n chá»¯ (novel/epub)
- **2 cháº¿ Ä‘á»™ Ä‘á»c**:
  - **Cháº¿ Ä‘á»™ dá»c**: Scroll liÃªn tá»¥c (nhÆ° Ä‘á»c web)
  - **Cháº¿ Ä‘á»™ ngang**: Láº­t trang tá»«ng trang (nhÆ° sÃ¡ch tháº­t)
- **Tá»± Ä‘á»™ng chia trang thÃ´ng minh**: Chia ná»™i dung thÃ nh trang phÃ¹ há»£p vá»›i kÃ­ch thÆ°á»›c mÃ n hÃ¬nh
- **Cháº¿ Ä‘á»™ toÃ n mÃ n hÃ¬nh**: áº¨n AppBar Ä‘á»ƒ táº­p trung Ä‘á»c

### ğŸ¨ 2. TÃ™Y CHá»ˆNH GIAO DIá»†N Äá»ŒC
- **KÃ­ch thÆ°á»›c font**: 8-30px (máº·c Ä‘á»‹nh 16px)
- **Chiá»u cao dÃ²ng**: 1.0-3.0 (máº·c Ä‘á»‹nh 1.6 - tá»‘i Æ°u cho máº¯t)
- **10+ Font chá»¯**: Roboto, Arial, Times New Roman, Georgia, Courier New, Verdana, Tahoma, Comic Sans MS, Palatino, Garamond
- **MÃ u sáº¯c**: TÃ¹y chá»‰nh mÃ u ná»n vÃ  mÃ u chá»¯
- **LÆ°u cÃ i Ä‘áº·t**: Tá»± Ä‘á»™ng lÆ°u vÃ o SharedPreferences

### ğŸ”Š 3. TEXT-TO-SPEECH (TTS) THÃ”NG MINH
- **Äa ngÃ´n ngá»¯**: Æ¯u tiÃªn tiáº¿ng Viá»‡t, fallback sang tiáº¿ng Anh
- **Äiá»u khiá»ƒn Ä‘áº§y Ä‘á»§**: Play/Pause/Stop/Äiá»u chá»‰nh tá»‘c Ä‘á»™
- **Highlight Ä‘á»“ng bá»™**: Highlight Ä‘oáº¡n vÄƒn Ä‘ang Ä‘Æ°á»£c Ä‘á»c
- **Tá»± Ä‘á»™ng cuá»™n**: Cuá»™n theo tiáº¿n Ä‘á»™ TTS
- **Chia Ä‘oáº¡n thÃ´ng minh**: Tá»± Ä‘á»™ng chia vÄƒn báº£n thÃ nh Ä‘oáº¡n phÃ¹ há»£p
- **Xá»­ lÃ½ lá»—i robust**: Tá»± Ä‘á»™ng khÃ´i phá»¥c khi cÃ³ lá»—i TTS

### ğŸ” 4. TÃŒM KIáº¾M NÃ‚NG CAO
- **TÃ¬m kiáº¿m trong chÆ°Æ¡ng**: TÃ¬m trong chÆ°Æ¡ng hiá»‡n táº¡i
- **TÃ¬m kiáº¿m toÃ n cá»¥c**: TÃ¬m trong táº¥t cáº£ chÆ°Æ¡ng cá»§a truyá»‡n
- **Highlight káº¿t quáº£**: Highlight káº¿t quáº£ tÃ¬m kiáº¿m vá»›i mÃ u sáº¯c
- **Navigation**: Äiá»u hÆ°á»›ng nhanh giá»¯a cÃ¡c káº¿t quáº£
- **Highlight táº¡m thá»i**: Tá»± Ä‘á»™ng xÃ³a sau 5 giÃ¢y

### âœ¨ 5. HIGHLIGHT VÃ€ BOOKMARK
- **Highlight vÄƒn báº£n**: ÄÃ¡nh dáº¥u Ä‘oáº¡n vÄƒn quan trá»ng
- **Bookmark vá»‹ trÃ­**: LÆ°u vá»‹ trÃ­ Ä‘á»c hiá»‡n táº¡i
- **Quáº£n lÃ½ danh sÃ¡ch**: Xem, xÃ³a, chá»‰nh sá»­a highlight/bookmark
- **Äiá»u hÆ°á»›ng nhanh**: Click Ä‘á»ƒ Ä‘i Ä‘áº¿n vá»‹ trÃ­ Ä‘Ã£ Ä‘Ã¡nh dáº¥u
- **LÆ°u trá»¯ persistent**: Dá»¯ liá»‡u khÃ´ng bá»‹ máº¥t khi Ä‘Ã³ng á»©ng dá»¥ng

### â¬ 6. Tá»° Äá»˜NG CUá»˜N THÃ”NG MINH
- **Tá»‘c Ä‘á»™ Ä‘iá»u chá»‰nh**: 5-300 pixels/giÃ¢y (máº·c Ä‘á»‹nh 80)
- **Chá»‰ cho cháº¿ Ä‘á»™ dá»c**: KhÃ´ng hoáº¡t Ä‘á»™ng á»Ÿ cháº¿ Ä‘á»™ Ä‘á»c ngang
- **Äiá»u khiá»ƒn linh hoáº¡t**: Play/Pause/Resume dá»… dÃ ng
- **Auto fullscreen**: Tá»± Ä‘á»™ng chuyá»ƒn fullscreen khi báº­t

### ğŸ“Š 7. THEO DÃ•I TIáº¾N Äá»˜ Äá»ŒC
- **Firebase Firestore**: LÆ°u tiáº¿n Ä‘á»™ Ä‘á»c trÃªn cloud
- **Äá»“ng bá»™ Ä‘a thiáº¿t bá»‹**: Tiáº¿n Ä‘á»™ Ä‘Æ°á»£c sync qua cÃ¡c thiáº¿t bá»‹
- **Hiá»ƒn thá»‹ pháº§n trÄƒm**: Hiá»ƒn thá»‹ % Ä‘Ã£ Ä‘á»c trong chÆ°Æ¡ng
- **Tiáº¿p tá»¥c Ä‘á»c**: Tá»± Ä‘á»™ng má»Ÿ vá»‹ trÃ­ cÅ© khi quay láº¡i
- **Tá»‘i Æ°u lÆ°u trá»¯**: Chá»‰ lÆ°u khi cÃ³ thay Ä‘á»•i Ä‘Ã¡ng ká»ƒ

### ğŸ’¬ 8. Há»† THá»NG BÃŒNH LUáº¬N
- **BÃ¬nh luáº­n theo chÆ°Æ¡ng**: Má»—i chÆ°Æ¡ng cÃ³ bÃ¬nh luáº­n riÃªng
- **Nested comments**: Há»— trá»£ tráº£ lá»i bÃ¬nh luáº­n
- **Like/Dislike**: ÄÃ¡nh giÃ¡ bÃ¬nh luáº­n
- **Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng**: Badge hiá»ƒn thá»‹ sá»‘ comment trong AppBar
- **Firebase integration**: LÆ°u trá»¯ vÃ  Ä‘á»“ng bá»™ real-time

### ğŸ—‚ï¸ 9. QUáº¢N LÃ CACHE VÃ€ HIá»†U NÄ‚NG
- **Cache offline**: Cache ná»™i dung Ä‘á»ƒ Ä‘á»c khÃ´ng cáº§n internet
- **Lazy loading**: Chá»‰ load ná»™i dung khi cáº§n
- **Memory management**: Tá»‘i Æ°u sá»­ dá»¥ng RAM
- **Background processing**: KhÃ´ng block UI thread

### ğŸŒ 10. Dá»ŠCH THUáº¬T
- **Popup translate**: Dá»‹ch vÄƒn báº£n Ä‘Æ°á»£c chá»n
- **Äa ngÃ´n ngá»¯**: Há»— trá»£ dá»‹ch sang nhiá»u ngÃ´n ngá»¯
- **Integration**: TÃ­ch há»£p vá»›i dá»‹ch vá»¥ dá»‹ch thuáº­t

---

## ğŸ”§ KIáº¾N TRÃšC Ká»¸ THUáº¬T

### ğŸ“ Cáº¥u trÃºc thÆ° má»¥c
```
lib/
â”œâ”€â”€ pages/               # CÃ¡c mÃ n hÃ¬nh chÃ­nh
â”‚   â”œâ”€â”€ epub_chapter_page.dart    # Trang Ä‘á»c truyá»‡n chÃ­nh (5966 dÃ²ng)
â”‚   â”œâ”€â”€ story_detail_page.dart    # Trang chi tiáº¿t truyá»‡n
â”‚   â”œâ”€â”€ highlights_bookmarks_page.dart  # Quáº£n lÃ½ highlight/bookmark
â”‚   â””â”€â”€ ...
â”œâ”€â”€ services/            # CÃ¡c service xá»­ lÃ½ logic
â”‚   â”œâ”€â”€ tts_service.dart          # Service TTS (944 dÃ²ng)
â”‚   â”œâ”€â”€ reading_settings_service.dart  # Quáº£n lÃ½ cÃ i Ä‘áº·t
â”‚   â”œâ”€â”€ reading_service.dart      # Quáº£n lÃ½ tiáº¿n Ä‘á»™ Ä‘á»c
â”‚   â”œâ”€â”€ chapter_cache_service.dart     # Cache chÆ°Æ¡ng
â”‚   â””â”€â”€ ...
â”œâ”€â”€ components/          # CÃ¡c widget tÃ¡i sá»­ dá»¥ng
â”‚   â”œâ”€â”€ selectable_text_widget.dart    # Widget text cÃ³ thá»ƒ select
â”‚   â”œâ”€â”€ translate_popup.dart      # Popup dá»‹ch thuáº­t
â”‚   â””â”€â”€ info_book_widgets.dart/   # Widgets thÃ´ng tin sÃ¡ch
â”œâ”€â”€ models/              # CÃ¡c model dá»¯ liá»‡u
â”‚   â”œâ”€â”€ story.dart       # Model truyá»‡n
â”‚   â”œâ”€â”€ highlight.dart   # Model highlight
â”‚   â”œâ”€â”€ bookmark.dart    # Model bookmark
â”‚   â””â”€â”€ ...
â””â”€â”€ api/                 # API calls
    â””â”€â”€ otruyen_api.dart # API truyá»‡n
```

### ğŸ—ï¸ Design Patterns
- **Singleton Pattern**: TTSService, ReadingSettingsService
- **StatefulWidget**: Quáº£n lÃ½ state phá»©c táº¡p
- **Service Layer**: TÃ¡ch biá»‡t logic nghiá»‡p vá»¥
- **Observer Pattern**: Callback functions cho TTS
- **Factory Pattern**: Model creation

### ğŸ”„ State Management
- **Local State**: StatefulWidget vá»›i setState
- **Persistent Storage**: SharedPreferences cho cÃ i Ä‘áº·t
- **Cloud Storage**: Firebase Firestore cho tiáº¿n Ä‘á»™ vÃ  comments
- **Memory Cache**: In-memory cache cho performance

### ğŸ¯ Performance Optimizations
- **Lazy Loading**: Chá»‰ load khi cáº§n
- **Text Chunking**: Chia text thÃ nh chunks nhá» cho TTS
- **Image Caching**: Cache hÃ¬nh áº£nh
- **Memory Management**: Proper dispose cá»§a controllers
- **Background Processing**: Non-blocking operations

---

## ğŸ“± TRáº¢I NGHIá»†M NGÆ¯á»œI DÃ™NG

### ğŸ¨ UI/UX Features
- **Material Design**: TuÃ¢n thá»§ Material Design guidelines
- **Responsive**: ThÃ­ch á»©ng vá»›i nhiá»u kÃ­ch thÆ°á»›c mÃ n hÃ¬nh
- **Accessibility**: Há»— trá»£ TTS cho ngÆ°á»i khiáº¿m thá»‹
- **Dark/Light Theme**: TÃ¹y chá»‰nh mÃ u sáº¯c theo sá»Ÿ thÃ­ch
- **Gesture Support**: Há»— trá»£ cÃ¡c gesture cÆ¡ báº£n

### ğŸš€ Performance
- **Fast Loading**: Cache vÃ  lazy loading
- **Smooth Scrolling**: Tá»‘i Æ°u scroll performance
- **Memory Efficient**: Quáº£n lÃ½ memory tá»‘t
- **Battery Optimized**: KhÃ´ng drain pin khÃ´ng cáº§n thiáº¿t

### ğŸ”’ Reliability
- **Error Handling**: Xá»­ lÃ½ lá»—i gracefully
- **Offline Support**: Hoáº¡t Ä‘á»™ng offline vá»›i cache
- **Data Persistence**: KhÃ´ng máº¥t dá»¯ liá»‡u khi app crash
- **Auto Recovery**: Tá»± Ä‘á»™ng khÃ´i phá»¥c TTS khi cÃ³ lá»—i

---

## ğŸ¯ TARGET USERS

### ğŸ‘¥ Äá»‘i tÆ°á»£ng sá»­ dá»¥ng
- **Äá»™c giáº£ truyá»‡n chá»¯**: NgÆ°á»i yÃªu thÃ­ch Ä‘á»c novel, light novel
- **NgÆ°á»i khiáº¿m thá»‹**: Sá»­ dá»¥ng TTS Ä‘á»ƒ "nghe" truyá»‡n
- **Há»c sinh, sinh viÃªn**: Äá»c tÃ i liá»‡u há»c táº­p
- **NgÆ°á»i báº­n rá»™n**: Sá»­ dá»¥ng TTS Ä‘á»ƒ nghe truyá»‡n khi di chuyá»ƒn

### ğŸ’¡ Use Cases
- **Äá»c giáº£i trÃ­**: Äá»c truyá»‡n tranh, tiá»ƒu thuyáº¿t
- **Há»c táº­p**: Äá»c tÃ i liá»‡u, sÃ¡ch giÃ¡o khoa
- **Accessibility**: Há»— trá»£ ngÆ°á»i khiáº¿m thá»‹
- **Multitasking**: Nghe truyá»‡n while doing other tasks

---

## ğŸš€ FUTURE ENHANCEMENTS

### ğŸ”® TÃ­nh nÄƒng cÃ³ thá»ƒ phÃ¡t triá»ƒn thÃªm
- **AI Reading Recommendations**: Gá»£i Ã½ sÃ¡ch dá»±a trÃªn sá»Ÿ thÃ­ch
- **Social Features**: Chia sáº» quotes, Ä‘Ã¡nh giÃ¡ sÃ¡ch
- **Advanced Analytics**: Thá»‘ng kÃª thá»i gian Ä‘á»c, tá»‘c Ä‘á»™ Ä‘á»c
- **Voice Control**: Äiá»u khiá»ƒn báº±ng giá»ng nÃ³i
- **Reading Groups**: Táº¡o nhÃ³m Ä‘á»c, tháº£o luáº­n
- **Annotation System**: Ghi chÃº chi tiáº¿t hÆ¡n
- **Export Features**: Xuáº¥t highlights, notes
- **Integration vá»›i Learning Apps**: Káº¿t ná»‘i vá»›i á»©ng dá»¥ng há»c táº­p

---

*ğŸ“ TÃ i liá»‡u nÃ y Ä‘Æ°á»£c táº¡o Ä‘á»ƒ giÃºp cÃ¡c láº­p trÃ¬nh viÃªn hiá»ƒu rÃµ vá» kiáº¿n trÃºc vÃ  tÃ­nh nÄƒng cá»§a á»©ng dá»¥ng Ä‘á»c truyá»‡n Flutter_BTL.* 